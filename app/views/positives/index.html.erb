<h1>ポジティブワードの一覧</h1>

<div class="box">
</div>

<%= form_with url: positives_path, method: :get, local: true do |form| %>
  <div class="filter-form">
    <div class="left-form">
      <!-- ログアウトを表示するリンクを左側に配置 -->
      <%= link_to 'ログアウト', '/positives', class: 'graph-link' %>
   
      <!-- 言葉一覧を表示するリンクを左側に配置 -->
      <%= link_to '言葉一覧', '/positives', class: 'graph-link' %>
  
      <!-- 期間別推定を表示するリンクを左側に配置 -->
      <%= link_to '期間別推定', '/positives/period', class: 'graph-link' %>
  
      <!-- 場所別の総数を表示するリンクを左側に配置 -->
      <%= link_to '場所別の総数', '/positives/site', class: 'graph-link' %>
    </div>    

    <!-- 左側: 一覧のテーブル -->
    <div class="center-form">
      <table class="design01">
        <!-- テーブルのヘッダー -->
        <thead>
          <tr>
            <th>ポジティブワード</th>
            <th>回数</th>
            <th>場所</th>
            <th>日付</th>
        </tr>
          </tr>
        </thead>
        <!-- テーブルのボディ -->
        <tbody>
          <% @items.each do |item| %>
            <tr>
              <td><%= item.word %></td>
              <td><%= item.count %></td>
              <td><%= item.place %></td>  
              <td><%= item.created_at.strftime('%Y/%m/%d') %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>

    <!-- 右側: フィルタフォーム（チェックボックス） -->
    <div class="right-form">   

      <div class="form-group">
        <!-- 開始日 -->
        <label for="start_date">開始日</label>
        <div class="date-selects">
          <%= select_tag :start_year, options_for_select((2020..2025).to_a, params[:start_year]), prompt: "年" %>
          <%= select_tag :start_month, options_for_select((1..12).to_a, params[:start_month]), prompt: "月" %>
          <%= select_tag :start_day, options_for_select((1..31).to_a, params[:start_day]), prompt: "日" %>
        </div>
      </div>

      <div class="form-group">
        <!-- 終了日 -->
        <label for="end_date">終了日</label>
        <div class="date-selects">
          <%= select_tag :end_year, options_for_select((2020..2025).to_a, params[:end_year]), prompt: "年" %>
          <%= select_tag :end_month, options_for_select((1..12).to_a, params[:end_month]), prompt: "月" %>
          <%= select_tag :end_day, options_for_select((1..31).to_a, params[:end_day]), prompt: "日" %>
        </div>
      </div>     

      <div class="form-group">
        <% @places.each do |place| %>
          <div class="checkbox-item">
            <%= check_box_tag 'places[]', place, params[:places]&.include?(place), class: 'place-checkbox' %>
            <%= label_tag "places_#{place}", place %>
          </div>
        <% end %>
      </div>
      
      <div class="form-group">
        <%= submit_tag "フィルタ", class: "filter-button" %>
      </div>
    </div>
  </div>
<% end %>


<div class="pagination-container">
  <%= paginate @items %>
</div>

<div class="pagination-container">
<!-- CSVアップロードフォーム -->
<%= form_with url: upload_csv_positives_path, local: true, multipart: true do |form| %>
  <%= form.file_field :csv_file, accept: '.csv' %>
  
  <!-- 場所の入力フィールドを追加 -->
  <%= form.text_field :place, placeholder: '場所を入力してください' %>

  <%= form.submit 'CSV アップロード' %>
<% end %>
</div>

<nav>
  <ul>
  <li><%= link_to '従業員用ページ', employee_positives_path %></li>
  </ul>
</nav>